var u=(a,r,l)=>new Promise((g,d)=>{var v=n=>{try{m(l.next(n))}catch(o){d(o)}},f=n=>{try{m(l.throw(n))}catch(o){d(o)}},m=n=>n.done?g(n.value):Promise.resolve(n.value).then(v,f);m((l=l.apply(a,r)).next())});import{P as z,n as c,q as _,e as p,$ as A,a2 as q,R as y,h,S as E,T as G,U as J,r as K}from"./index-z501862F.js";import{_ as Q}from"./form.vue_vue_type_script_setup_true_lang-DTY_0Cuc.js";import{s as R}from"./index-C27yIgHt.js";import{l as X,d as Z,a as w,u as k}from"./dict-DBEtkn0u.js";import"./enums-Cr8Lt-4Z.js";import"./hooks-BuEsGYNv.js";function le(){const a=z({total:0,pageSize:10,currentPage:1,background:!0}),r=z({dictName:"",dictCode:"",status:"",size:a.pageSize,current:a.currentPage}),l=c({dictName:""}),g=c(),d=c([]),v=c(!1),f=c(!0),m=c(!1),n=c({}),o=c(!1),H=[{label:"字典名称",prop:"dictName",width:200,fixed:"left"},{label:"字典编码",prop:"dictCode",width:200,fixed:"left"},{label:"状态",cellRenderer:e=>{var t;return p(K("el-switch"),{size:e.props.size==="small"?"small":"default",loading:(t=n.value[e.index])==null?void 0:t.loading,modelValue:e.row.status,"onUpdate:modelValue":s=>e.row.status=s,"active-value":0,"inactive-value":1,"active-text":"已启用","inactive-text":"已停用",style:"--el-switch-on-color: #13ce66","inline-prompt":!0,onChange:()=>P(e)},null)},minWidth:80},{label:"创建时间",prop:"createTime",minWidth:160,formatter:({createTime:e})=>A(e).format("YYYY-MM-DD HH:mm:ss")},{label:"备注",prop:"remark",minWidth:160},{label:"操作",fixed:"right",width:220,slot:"operation"}];function P({row:e,index:t}){R("提示",{contentRenderer:()=>p("p",{style:"text-align: center;margin-bottom:20px"},[h("确认要"),e.status===1?"停用":"启用",p("strong",{style:"color:var(--el-color-warning);margin:0 5px"},[e.dictName]),h("吗?")]),beforeSure:s=>u(this,null,function*(){n.value[t]=Object.assign({},n.value[t],{loading:!0}),(yield k(e)).code=="H200"&&(n.value[t]=Object.assign({},n.value[t],{loading:!1}),y(`已${e.status===1?"停用":"启用"}${e.dictName}`,{type:"success"})),s(),i()}),closeCallBack:({args:s})=>{(s==null?void 0:s.command)!=="sure"&&(e.status===0?e.status=1:e.status=0)}})}function $(e){R("警告",{contentRenderer:()=>p("p",{style:"text-align: center;margin-bottom:20px"},[h("确认要删除"),p("strong",{style:"color:var(--el-color-danger);margin:0 5px"},[e.dictName]),h("吗?")]),beforeSure:t=>u(this,null,function*(){(yield Z(e.id)).code=="H200"&&y(`已删除"${e.dictName}`,{type:"success"}),t(),i()})})}function F(e){a.currentPage=1,a.pageSize=e,i()}function M(e){a.currentPage=e,i()}function V(e){}function i(){return u(this,null,function*(){f.value=!0,r.current=a.currentPage,r.size=a.pageSize;const{code:e,data:t}=yield X(q(r));e!="H200"||(d.value=t.records,a.total=t.total,a.pageSize=t.size,a.currentPage=t.current),f.value=!1})}const Y=e=>{e&&(e.resetFields(),i())};function j(e="新增",t){var s,D,C,S,N;E({title:`${e}字典`,props:{formInline:{id:(s=t==null?void 0:t.id)!=null?s:null,dictName:(D=t==null?void 0:t.dictName)!=null?D:"",dictCode:(C=t==null?void 0:t.dictCode)!=null?C:"",status:(S=t==null?void 0:t.status)!=null?S:0,remark:(N=t==null?void 0:t.remark)!=null?N:""}},width:"40%",draggable:!0,fullscreen:J(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>G(Q,{ref:g}),beforeSure:(L,{options:O})=>{const T=g.value.getRef(),b=O.props.formInline;function x(){y(`您${e}了字典名称为${b.dictName}的这条数据`,{type:"success"}),L(),i()}T.validate(U=>u(this,null,function*(){U&&(e==="新增"?(yield w(b)).code=="H200"&&x():(yield k(b)).code=="H200"&&x())}))}})}function B(e){l.value=e,o.value=!0}function I(e){o.value=e}return _(()=>u(this,null,function*(){i()})),{form:r,isShow:v,curRow:l,loading:f,columns:H,dataList:d,isLinkage:m,pagination:a,dictDataDrawer:o,onSearch:i,resetForm:Y,openDialog:j,handleDelete:$,handleSizeChange:F,handleCurrentChange:M,handleSelectionChange:V,openDictData:B,handleDrawerUpdate:I}}export{le as useDict};
