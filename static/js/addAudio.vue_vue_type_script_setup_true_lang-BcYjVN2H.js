var d=(p,t,a)=>new Promise((o,s)=>{var i=e=>{try{r(a.next(e))}catch(n){s(n)}},l=e=>{try{r(a.throw(e))}catch(n){s(n)}},r=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,l);r((a=a.apply(p,t)).next())});import{d as j}from"./pulse-fill-DAz5b2nQ.js";import{d as H}from"./add-circle-line-DOJqVT3s.js";import{d as L,n as O,r as $,c as M,i as B,o as u,e as q,g as c,j as D,h as F,S as G,T as J,U as K,R as P}from"./index-_ppfBu12.js";import{_ as Q}from"./form.vue_vue_type_script_setup_true_lang-9NFaHkiE.js";import{t as W,b as X}from"./category-B2RJSKvQ.js";import{t as Y}from"./dept-CxQSQia3.js";import{g as Z}from"./task-BvUIBQkW.js";import{u as T}from"./hooks-B99vGHGm.js";import{d as ee}from"./edit-pen-Ci7W0xNM.js";const pe=L({__name:"addAudio",props:{type:{},size:{},row:{}},setup(p){const t=p,a=O(),o=O(t.row);function s(){return d(this,null,function*(){var e,n,f,m,y,g,I,v,_,k,C,b,h,w,z,R;const{data:i}=yield Y(),{data:l}=yield Z(),{data:r}=yield W(7);G({title:"上传音频",props:{formAttrProp:{item:{categories:(n=(e=o.value)==null?void 0:e.categories)!=null?n:null,level1CategoryId:(m=(f=o.value)==null?void 0:f.level1CategoryId)!=null?m:null,level2CategoryId:(g=(y=o.value)==null?void 0:y.level2CategoryId)!=null?g:null,taskId:(v=(I=o.value)==null?void 0:I.taskId)!=null?v:null,labelIds:(k=(_=o.value)==null?void 0:_.labelIds)!=null?k:[],protectionPeriod:(b=(C=o.value)==null?void 0:C.protectionPeriod)!=null?b:"",userIds:(w=(h=o.value)==null?void 0:h.userIds)!=null?w:[],notice:(R=(z=o.value)==null?void 0:z.notice)!=null?R:""},nameLabel:"音频",depts:i,tasks:l,categoryOptions:r}},width:"100%",top:"0%",draggable:!0,fullscreen:K(),fullscreenIcon:!0,closeOnClickModal:!1,hideFooter:!0,contentRenderer:()=>J(Q,{ref:a}),beforeSure:(me,ye)=>d(this,[me,ye],function*(U,{options:V}){const E=a.value.getRef(),x=V.props.formInline;function N(){P(`新增${x.title}成功`,{type:"success"}),U()}E.validate(S=>d(this,null,function*(){if(S)try{(yield X(x)).code=="H200"&&N()}catch(A){console.error("Error update menu:",A),P("新增音频时出错",{type:"error"})}}))})})})}return(i,l)=>{const r=$("IconifyIconOffline"),e=$("el-button");return t.type==="topIcon"?(u(),M("span",{key:0,class:"fullscreen-icon navbar-bg-hover",onClick:s},[q(r,{icon:c(j)},null,8,["icon"])])):t.type==="itemUpdate"?(u(),B(e,{key:1,class:"reset-margin",link:"",type:"primary",size:t.size||"default",icon:c(T)(c(ee)),onClick:s},{default:D(()=>[F(" 修改 ")]),_:1},8,["size","icon"])):(u(),B(e,{key:2,type:"primary",size:t.size||"default",icon:c(T)(c(H)),onClick:s},{default:D(()=>[F(" 新增 ")]),_:1},8,["size","icon"]))}}});export{pe as _};
