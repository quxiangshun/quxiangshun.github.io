var p=(c,t,o)=>new Promise((n,d)=>{var u=s=>{try{e(o.next(s))}catch(r){d(r)}},_=s=>{try{e(o.throw(s))}catch(r){d(r)}},e=s=>s.done?n(s.value):Promise.resolve(s.value).then(u,_);e((o=o.apply(c,t)).next())});import{aO as y,d as I,n as m,P as k,q as E,r as x,c as f,o as g,f as a,A as D,e as A,y as i,a3 as S,$ as Y,an as b,ao as N,_ as O}from"./index-vTRDVSJy.js";const C="8022e2b1977b4686ba71e6a29c9a593a",P="https://devapi.qweather.com/v7/weather",$=c=>p(void 0,null,function*(){try{const t=yield y.get(`${P}/now`,{params:{key:C,location:c}});if(t.data.code==="200")return t.data.now;throw new Error(`API Error: ${t.data.code}`)}catch(t){throw console.error("Error fetching weather data:",t),t}}),w=c=>(b("data-v-43d98122"),c=c(),N(),c),B={class:"title_wrap"},M=w(()=>a("div",{class:"light"},null,-1)),W=w(()=>a("div",{class:"title"},[a("span",{class:"title-text"},"互联网设备可视化平台")],-1)),H={class:"top-left"},L={class:"date"},V={key:0,class:"top-right"},q={class:"weather"},F={style:{"margin-left":"10px"}},T=I({__name:"Header",setup(c){const t=m(null),o=m(null),n=k({dateDay:"",dateYear:"",dateWeek:"",timing:null}),d=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];(()=>{n.timing=setInterval(()=>{const e=Y();n.dateYear=e.format("YYYY-MM-DD"),n.dateDay=e.format("HH:mm:ss"),n.dateWeek=d[e.day()]},1e3)})();const _=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>p(this,null,function*(){const s=e.coords.latitude,r=e.coords.longitude;try{const l=`${r},${s}`;t.value=yield $(l)}catch(l){o.value="无法获取天气数据，请稍后重试。",console.error("Failed to fetch weather data:",l)}}),e=>{switch(e.code){case e.PERMISSION_DENIED:o.value="用户拒绝了获取地理位置的请求。";break;case e.POSITION_UNAVAILABLE:o.value="位置信息不可用。";break;case e.TIMEOUT:o.value="获取位置信息超时。";break;default:o.value="发生未知错误。";break}console.error("Error getting location:",e)}):o.value="该浏览器不支持地理定位功能。"};return E(()=>{_()}),(e,s)=>{var l,h,v;const r=x("IconifyIconOnline");return g(),f("div",B,[M,W,a("div",H,[A(r,{icon:"ph:key-return-fill",width:"30px",height:"40px"}),a("div",L,[a("span",null,i(n.dateYear),1),a("span",null,i(n.dateWeek),1),a("span",null,i(n.dateDay),1)])]),t.value?(g(),f("div",V,[a("div",q,[a("i",{class:S(`qi-${(l=t.value)==null?void 0:l.icon}`)},null,2),a("span",F,i((h=t.value)==null?void 0:h.text),1),a("span",null,i((v=t.value)==null?void 0:v.temp)+" °C ",1)])])):D("",!0)])}}}),j=O(T,[["__scopeId","data-v-43d98122"]]);export{j as default};
