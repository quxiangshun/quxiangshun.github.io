var h=(r,m,a)=>new Promise((u,p)=>{var g=n=>{try{l(a.next(n))}catch(d){p(d)}},v=n=>{try{l(a.throw(n))}catch(d){p(d)}},l=n=>n.done?u(n.value):Promise.resolve(n.value).then(g,v);l((a=a.apply(r,m)).next())});import{n as f,P as y,q as I,$ as Y,a2 as j,G as w,e as b,R,h as z,S as M,T as O,U as _,r as $,F as L,aY as V}from"./index-B7W7rs76.js";import{_ as U}from"./form.vue_vue_type_script_setup_true_lang-D85_QLEW.js";import{s as q}from"./index-B9geSWXR.js";import{g as B,d as G,a as W,u as E}from"./audio-C7Wc6Q-h.js";import"./index-oANvl20y.js";import"./label-DekmD-EQ.js";import"./close-line-Dw4sg3MD.js";import"./mitt-E5P-NQ8u.js";import"./upload-2-line-CWGyx_9V.js";import"./index-By3I6NGF.js";import"./hooks-D07EST8v.js";function J(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!V(r)}function ie(){const r=f(""),m=f(),a=y({total:0,pageSize:10,currentPage:1,background:!0}),u=y({name:"",size:a.pageSize,current:a.currentPage}),p=f(),g=f([]),v=f(!1),l=f(!1),n=[{label:"音频名称",prop:"name",fixed:"left"},{label:"一级分裂",prop:"level1Name"},{label:"二级分裂",prop:"level2Name"},{label:"标签",prop:"labelNames",cellRenderer:({row:e})=>{const t=[],o=e.labelNames;for(let s=0;s<o.length;s++){const c=o[s];t.push(b($("el-tag"),{size:"small",type:"primary",effect:"plain"},J(c)?c:{default:()=>[c]}))}return b(L,null,[t])}},{label:"任务编号",prop:"taskId"},{label:"创建日期",prop:"createTIme",minWidth:110,width:120,showOverflowTooltip:!0,formatter:({createTime:e})=>Y(e).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:220,slot:"operation"}];function d(e){q("警告",{contentRenderer:()=>b("p",{style:"text-align: center;margin-bottom:20px"},[z("确认要删除"),b("strong",{style:"color:var(--el-color-danger);margin:0 5px"},[e.username]),z("吗?")]),beforeSure:t=>h(this,null,function*(){(yield G(e.id)).code=="H200"&&R(`已删除"${e.userName}`,{type:"success"}),t(),i()})})}function N(e){a.currentPage=1,a.pageSize=e,i()}function x(e){a.currentPage=e,i()}function i(){return h(this,null,function*(){l.value=!0,u.current=a.currentPage,u.size=a.pageSize;const{code:e,data:t}=yield B(j(u));if(e=="H200"){const o=t.records;if(g.value=t.records,a.total=t.total,a.pageSize=t.size,a.currentPage=t.current,o&&o.length){const s=o[0];r.value=s.url,w(()=>{const{setCurrentRow:c}=m.value.getTableRef();c(s)})}}l.value=!1})}function A(e){r.value=e.url}const C=e=>{e&&(e.resetFields(),i())};function D(e="新增",t){var o,s;M({title:`${e}音频`,props:{formInline:{id:(o=t==null?void 0:t.id)!=null?o:null,name:(s=t==null?void 0:t.name)!=null?s:""}},width:"40%",top:"5vh",draggable:!0,fullscreen:_(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>O(U,{ref:p}),beforeSure:(c,{options:P})=>{const H=p.value.getRef(),T=P.props.formInline;function S(){R(`您${e}了音频数据`,{type:"success"}),c(),i()}H.validate(k=>h(this,null,function*(){k&&(e==="新增"?(yield W(null)).code=="H200"&&S():(yield E(T)).code=="H200"&&S())}))}})}return I(()=>{i()}),{currentAudioUrl:r,tableRef:m,form:u,isShow:v,loading:l,columns:n,dataList:g,pagination:a,onSearch:i,resetForm:C,openDialog:D,handleDelete:d,handleSizeChange:N,handleCurrentChange:x,handleRowClick:A}}export{ie as useAudioList};
