var h=(e,a,o)=>new Promise((p,d)=>{var i=r=>{try{c(o.next(r))}catch(u){d(u)}},g=r=>{try{c(o.throw(r))}catch(u){d(u)}},c=r=>r.done?p(r.value):Promise.resolve(r.value).then(i,g);c((o=o.apply(e,a)).next())});import{aP as S,aX as x,P as f,n as l,p as N,q as C,$ as R,a2 as k,e as m,R as D,h as w}from"./index-_ppfBu12.js";import{s as H}from"./index-CIrz3C_X.js";import"./hooks-B99vGHGm.js";const y="/sdResourceNotice",T=e=>S.request("get",x(`${y}/list`),{params:e}),Y=e=>S.request("delete",x(`${y}/delete`),{data:e});function F(){const e=f({total:0,pageSize:10,currentPage:1,background:!0}),a=f({title:"",type:"",status:"",size:e.pageSize,current:e.currentPage}),o=l(),p=l([]),d=l(!1),i=l(!0),g=l(!1),c=N(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]),r=[{label:"内容",prop:"notice",showOverflowTooltip:!0},{label:"创建人",prop:"creator",width:100},{label:"创建时间",prop:"createTime",width:100,showOverflowTooltip:!0,formatter:({createTime:t})=>R(t).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:160,slot:"operation"}];function u(t){H("警告",{contentRenderer:()=>m("p",{style:"text-align: center;margin-bottom:20px"},[w("确认要删除"),m("strong",{style:"color:var(--el-color-danger);margin:0 5px"},[t.title]),w("吗?")]),beforeSure:s=>h(this,null,function*(){(yield Y([t.id])).code=="H200"&&D(`已删除"${t.title}`,{type:"success"}),s(),n()})})}function b(t){e.currentPage=1,e.pageSize=t,n()}function v(t){e.currentPage=t,n()}function z(t){}function n(){return h(this,null,function*(){i.value=!0,a.current=e.currentPage,a.size=e.pageSize;const{code:t,data:s}=yield T(k(a));t=="H200"&&(p.value=s.records,e.total=s.total,e.pageSize=s.size,e.currentPage=s.current),i.value=!1})}const P=t=>{t&&(t.resetFields(),n())};return C(()=>{n()}),{form:a,isShow:d,curRow:o,loading:i,columns:r,dataList:p,isLinkage:g,pagination:e,buttonClass:c,onSearch:n,resetForm:P,handleDelete:u,handleSizeChange:b,handleCurrentChange:v,handleSelectionChange:z}}export{F as useSystemNotice};
