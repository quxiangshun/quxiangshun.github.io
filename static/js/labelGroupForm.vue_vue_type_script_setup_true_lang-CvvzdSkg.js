import{R as h}from"./index-C07DLrIx.js";import{f as R}from"./rule-CeMokVT1.js";import{d as L,n as v,r,i as C,o as _,j as o,e as a,g,f as O,c as I,A as G,y as V,F as U,t as j}from"./index-_ppfBu12.js";const P={key:0},S=L({__name:"labelGroupForm",props:{formInline:{default:()=>({higherCategoryOptions:[],categoriesByLabelGroup:[],categoryIds:[],visibleCategoryIds:[],parentId:0,name:"",visible:0})}},setup(k,{expose:x}){const w=k,b=v(),l=v(w.formInline),y=v(l.value.categoriesByLabelGroup);function B(){return b.value}function F(i){const e=(u,m)=>{for(const d of u){if(d.id===m)return d;if(d.children){const f=e(d.children,m);if(f)return f}}return null},c=e(l.value.higherCategoryOptions,i);if(!c)return"";const s=[];let t=c;for(;t;){s.unshift(t.name);const u=t.parentId;u?t=e(l.value.higherCategoryOptions,u):t=null}return s.join("/")}function N(){const i=[];for(const e of l.value.categoryIds)i.push({id:e,names:F(e)});y.value=i}return x({getRef:B}),(i,e)=>{const c=r("el-input"),s=r("el-form-item"),t=r("el-row"),u=r("el-cascader"),m=r("el-checkbox"),d=r("el-checkbox-group"),f=r("el-form");return _(),C(f,{ref_key:"ruleFormRef",ref:b,model:l.value,rules:g(R),"label-width":"100px"},{default:o(()=>[a(t,null,{default:o(()=>[a(g(h),null,{default:o(()=>[a(s,{label:"标签名称：",prop:"name"},{default:o(()=>[a(c,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>l.value.name=n),clearable:"",placeholder:"请输入标签名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(t,null,{default:o(()=>[a(g(h),null,{default:o(()=>[a(s,{label:"所属分类："},{default:o(()=>[a(u,{modelValue:l.value.categoryIds,"onUpdate:modelValue":e[1]||(e[1]=n=>l.value.categoryIds=n),class:"w-full",options:l.value.higherCategoryOptions,props:{value:"id",label:"name",emitPath:!1,multiple:!0},clearable:"",filterable:"",placeholder:"请选择所属分类",style:{width:"100%"},onChange:N},{default:o(({node:n,data:p})=>[O("span",null,V(p.name),1),n.isLeaf?G("",!0):(_(),I("span",P," ("+V(p.children.length)+") ",1))]),_:1},8,["modelValue","options"])]),_:1})]),_:1})]),_:1}),a(t,null,{default:o(()=>[a(g(h),null,{default:o(()=>[a(s,{label:"必填设置："},{default:o(()=>[a(d,{modelValue:l.value.visibleCategoryIds,"onUpdate:modelValue":e[2]||(e[2]=n=>l.value.visibleCategoryIds=n)},{default:o(()=>[(_(!0),I(U,null,j(y.value,(n,p)=>(_(),C(m,{key:p,label:n.names,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{S as _};
