import{u as B}from"./upload-BNUeVoOG.js";import{d as k}from"./upload-2-line-CWGyx_9V.js";import{d as C,n as o,r as d,c as w,o as E,e as p,j as N,f as U,h as V,g as s,R as l}from"./index-B7W7rs76.js";const q={style:{margin:"10px",height:"200px"}},O={class:"el-upload__text"},z=C({__name:"form",props:{formInline:{default:()=>({fileList:[]})}},emits:["uploadResult"],setup(f,{expose:m,emit:_}){const h=f,n=_,{uploadUrl:v,uploadFileByBack:x}=B(),r=o(),i=o(h.formInline),e=o(!1),u=o({path:""});function g(t){u.value.path=t.name}function y(t,a,c){l("上传失败,请您重新上传！",{type:"error"}),e.value=!1,n("uploadResult",!1)}function F(){l("上传成功！",{type:"success"}),e.value=!1,n("uploadResult",!0)}function b(){l("只允许上传一个文件",{type:"error"})}function I(){return r.value}return m({getRef:I}),(t,a)=>{const c=d("IconifyIconOffline"),R=d("el-upload");return E(),w("div",q,[p(R,{ref_key:"uploadRef",ref:r,"file-list":i.value.fileList,"onUpdate:fileList":a[0]||(a[0]=L=>i.value.fileList=L),data:u.value,drag:"",action:s(v),"auto-upload":!1,limit:1,"http-request":s(x),disabled:e.value,"on-change":g,"on-error":y,"on-exceed":b,"before-upload":()=>e.value=!0,"on-success":F},{default:N(()=>[U("div",O,[p(c,{icon:s(k),width:"26",class:"m-auto mb-2"},null,8,["icon"]),V(" 可点击或拖拽上传 ")])]),_:1},8,["file-list","data","action","http-request","disabled","before-upload"])])}}});export{z as _};
