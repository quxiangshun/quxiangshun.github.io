const n=`---
title: SSH 端口配置
description: 阿里云 ECS 安全组放行与 sshd 端口配置
---

# SSH 端口配置

> 编辑日期：2026-02-26

本文档说明如何将 SSH 服务端口从默认 22 扩展为 9922，并配合阿里云 ECS 安全组完成放行配置。

## 第一步：安全组放行 9922 端口（入方向）

**操作场景**：阿里云 ECS 控制台操作，仅放行 9922 端口流量，不实现映射，为后续转发做准备。

### 操作步骤

1. 登录阿里云 ECS 控制台，进入目标服务器的【实例详情】页面；

2. 左侧导航栏找到【安全组】，点击进入后，选择对应安全组，点击【配置规则】；

3. 切换至【入方向】标签页，点击【添加安全组规则】；

4. 按以下参数准确填写（关键配置，不可遗漏）：

   | 参数 | 值 |
   |------|-----|
   | 协议类型 | 自定义 TCP |
   | 端口范围 | 9922/9922（单端口，仅放行 9922） |
   | 授权对象 | 0.0.0.0/0（测试阶段可允许所有 IP，生产环境建议填写个人固定公网 IP，格式如 123.45.67.89/32） |
   | 优先级 | 1（默认即可，数值越小优先级越高） |
   | 描述 | SSH 9922 端口映射（便于后续识别） |

5. 确认参数无误后，点击【保存】，安全组规则配置完成。

## 第二步：配置 sshd 监听 9922 端口

### 操作步骤

1. 编辑 sshd 配置文件：

   \`\`\`bash
   sudo vi /etc/ssh/sshd_config
   \`\`\`

2. 找到 \`Port 22\` 一行，在下方添加一行：\`Port 9922\`（保留原有 \`Port 22\`，不修改）；

3. 保存并退出编辑（vi 编辑器：按 \`Esc\`，输入 \`:wq\`，回车）；

4. 重启 sshd 服务，使配置生效：

   \`\`\`bash
   sudo systemctl restart sshd
   \`\`\`

### 配置示例

\`\`\`text
# 原有配置
Port 22

# 新增配置
Port 9922
\`\`\`

## 连接方式

配置完成后，可使用以下方式连接：

\`\`\`bash
ssh -p 9922 用户名@服务器公网IP
\`\`\`

## 安全建议

- 生产环境建议将授权对象限制为个人或办公网固定 IP（如 \`123.45.67.89/32\`）
- 确认 9922 端口可正常连接后，可考虑关闭 22 端口以降低扫描风险
`;export{n as default};
