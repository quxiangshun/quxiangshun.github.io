import{_ as s,o as t,c as i,a2 as e}from"./chunks/framework.C766EroN.js";const k=JSON.parse('{"title":"SSH 端口配置","description":"阿里云 ECS 安全组放行与 sshd 端口配置","frontmatter":{"title":"SSH 端口配置","description":"阿里云 ECS 安全组放行与 sshd 端口配置"},"headers":[],"relativePath":"tech-share/ssh/index.md","filePath":"tech-share/ssh/index.md"}'),l={name:"tech-share/ssh/index.md"};function h(n,a,d,p,o,r){return t(),i("div",null,[...a[0]||(a[0]=[e(`<h1 id="ssh-端口配置" tabindex="-1">SSH 端口配置 <a class="header-anchor" href="#ssh-端口配置" aria-label="Permalink to &quot;SSH 端口配置&quot;">​</a></h1><blockquote><p>编辑日期：2026-02-26</p></blockquote><p>本文档说明如何将 SSH 服务端口从默认 22 扩展为 9922，并配合阿里云 ECS 安全组完成放行配置。</p><h2 id="第一步-安全组放行-9922-端口-入方向" tabindex="-1">第一步：安全组放行 9922 端口（入方向） <a class="header-anchor" href="#第一步-安全组放行-9922-端口-入方向" aria-label="Permalink to &quot;第一步：安全组放行 9922 端口（入方向）&quot;">​</a></h2><p><strong>操作场景</strong>：阿里云 ECS 控制台操作，仅放行 9922 端口流量，不实现映射，为后续转发做准备。</p><h3 id="操作步骤" tabindex="-1">操作步骤 <a class="header-anchor" href="#操作步骤" aria-label="Permalink to &quot;操作步骤&quot;">​</a></h3><ol><li><p>登录阿里云 ECS 控制台，进入目标服务器的【实例详情】页面；</p></li><li><p>左侧导航栏找到【安全组】，点击进入后，选择对应安全组，点击【配置规则】；</p></li><li><p>切换至【入方向】标签页，点击【添加安全组规则】；</p></li><li><p>按以下参数准确填写（关键配置，不可遗漏）：</p><table tabindex="0"><thead><tr><th>参数</th><th>值</th></tr></thead><tbody><tr><td>协议类型</td><td>自定义 TCP</td></tr><tr><td>端口范围</td><td>9922/9922（单端口，仅放行 9922）</td></tr><tr><td>授权对象</td><td>0.0.0.0/0（测试阶段可允许所有 IP，生产环境建议填写个人固定公网 IP，格式如 123.45.67.89/32）</td></tr><tr><td>优先级</td><td>1（默认即可，数值越小优先级越高）</td></tr><tr><td>描述</td><td>SSH 9922 端口映射（便于后续识别）</td></tr></tbody></table></li><li><p>确认参数无误后，点击【保存】，安全组规则配置完成。</p></li></ol><h2 id="第二步-配置-sshd-监听-9922-端口" tabindex="-1">第二步：配置 sshd 监听 9922 端口 <a class="header-anchor" href="#第二步-配置-sshd-监听-9922-端口" aria-label="Permalink to &quot;第二步：配置 sshd 监听 9922 端口&quot;">​</a></h2><h3 id="操作步骤-1" tabindex="-1">操作步骤 <a class="header-anchor" href="#操作步骤-1" aria-label="Permalink to &quot;操作步骤&quot;">​</a></h3><ol><li><p>编辑 sshd 配置文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ssh/sshd_config</span></span></code></pre></div></li><li><p>找到 <code>Port 22</code> 一行，在下方添加一行：<code>Port 9922</code>（保留原有 <code>Port 22</code>，不修改）；</p></li><li><p>保存并退出编辑（vi 编辑器：按 <code>Esc</code>，输入 <code>:wq</code>，回车）；</p></li><li><p>重启 sshd 服务，使配置生效：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sshd</span></span></code></pre></div></li></ol><h3 id="配置示例" tabindex="-1">配置示例 <a class="header-anchor" href="#配置示例" aria-label="Permalink to &quot;配置示例&quot;">​</a></h3><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 原有配置</span></span>
<span class="line"><span>Port 22</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 新增配置</span></span>
<span class="line"><span>Port 9922</span></span></code></pre></div><h2 id="连接方式" tabindex="-1">连接方式 <a class="header-anchor" href="#连接方式" aria-label="Permalink to &quot;连接方式&quot;">​</a></h2><p>配置完成后，可使用以下方式连接：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 9922</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户名@服务器公网IP</span></span></code></pre></div><h2 id="安全建议" tabindex="-1">安全建议 <a class="header-anchor" href="#安全建议" aria-label="Permalink to &quot;安全建议&quot;">​</a></h2><ul><li>生产环境建议将授权对象限制为个人或办公网固定 IP（如 <code>123.45.67.89/32</code>）</li><li>确认 9922 端口可正常连接后，可考虑关闭 22 端口以降低扫描风险</li></ul>`,17)])])}const b=s(l,[["render",h]]);export{k as __pageData,b as default};
