import{_ as i,o as a,c as t,a2 as l}from"./chunks/framework.C766EroN.js";const c=JSON.parse('{"title":"物理机安装 MySQL","description":"Ubuntu 物理机安装 MySQL 8.0","frontmatter":{"title":"物理机安装 MySQL","description":"Ubuntu 物理机安装 MySQL 8.0"},"headers":[],"relativePath":"tech-share/mysql/install.md","filePath":"tech-share/mysql/install.md"}'),n={name:"tech-share/mysql/install.md"};function h(e,s,p,k,r,o){return a(),t("div",null,[...s[0]||(s[0]=[l(`<blockquote><p>编辑日期：2026-02-27</p></blockquote><h1 id="物理机安装-mysql" tabindex="-1">物理机安装 MySQL <a class="header-anchor" href="#物理机安装-mysql" aria-label="Permalink to &quot;物理机安装 MySQL&quot;">​</a></h1><p>本文档说明在 Ubuntu 上安装 MySQL 8.0 的步骤。</p><h2 id="一、环境要求" tabindex="-1">一、环境要求 <a class="header-anchor" href="#一、环境要求" aria-label="Permalink to &quot;一、环境要求&quot;">​</a></h2><ul><li><strong>操作系统</strong>：Ubuntu 20.04+</li><li><strong>内存</strong>：建议 2GB+</li><li><strong>磁盘</strong>：建议 10GB+ 可用空间</li><li><strong>权限</strong>：root 或 sudo</li></ul><h2 id="二、安装-mysql" tabindex="-1">二、安装 MySQL <a class="header-anchor" href="#二、安装-mysql" aria-label="Permalink to &quot;二、安装 MySQL&quot;">​</a></h2><h3 id="_1-安装" tabindex="-1">1. 安装 <a class="header-anchor" href="#_1-安装" aria-label="Permalink to &quot;1. 安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql-server</span></span></code></pre></div><h3 id="_2-启动与开机自启" tabindex="-1">2. 启动与开机自启 <a class="header-anchor" href="#_2-启动与开机自启" aria-label="Permalink to &quot;2. 启动与开机自启&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查状态（应显示 active (running)）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 验证版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输出示例：mysql  Ver 8.0.45-0ubuntu0.24.04.1 for Linux on x86_64 ((Ubuntu))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看是否开机自启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is-enabled</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输出：enabled</span></span></code></pre></div><h3 id="_3-常用服务操作" tabindex="-1">3. 常用服务操作 <a class="header-anchor" href="#_3-常用服务操作" aria-label="Permalink to &quot;3. 常用服务操作&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><h2 id="三、首次登录与密码配置" tabindex="-1">三、首次登录与密码配置 <a class="header-anchor" href="#三、首次登录与密码配置" aria-label="Permalink to &quot;三、首次登录与密码配置&quot;">​</a></h2><p>Ubuntu 下通过 apt 安装时，root 默认使用 <code>auth_socket</code> 插件，本地可直接 <code>sudo mysql -u root</code> 无密码登录，不会生成临时密码。</p><h3 id="为何能无密码登录-知其然知其所以然" tabindex="-1">为何能无密码登录？（知其然知其所以然） <a class="header-anchor" href="#为何能无密码登录-知其然知其所以然" aria-label="Permalink to &quot;为何能无密码登录？（知其然知其所以然）&quot;">​</a></h3><ul><li><strong>MySQL 8.0.45 在 Ubuntu 24.04 下通过 apt 安装时</strong>，依然默认给本地 root 用户启用 <code>auth_socket</code> 插件，这就是直接用 <code>mysql -u root</code> 登录且无需密码的根本原因： <ul><li>该版本延续了 Ubuntu 系的安全设计，<strong>优先通过系统用户身份认证</strong>，而非密码；</li><li>未看到临时密码，是因为 <code>auth_socket</code> 认证模式下，MySQL <strong>不会生成临时密码</strong>（临时密码仅在「密码认证模式」下才会生成）。</li></ul></li><li><strong>该版本的关键更新（实用点）</strong>： <ul><li>密码策略更严格：切换为密码认证（<code>mysql_native_password</code>）时，密码须满足「至少 8 位、包含大小写字母 + 数字 + 特殊字符」，否则会提示 <code>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</code>；</li><li>默认禁用远程 root 登录：即使设置了密码，默认也只能本地登录 root，远程连接需手动授权；</li><li>性能与稳定性优化：针对 Ubuntu 24.04 内核做了适配，本地操作响应更快。</li></ul></li></ul><h3 id="_1-确认认证方式" tabindex="-1">1. 确认认证方式 <a class="header-anchor" href="#_1-确认认证方式" aria-label="Permalink to &quot;1. 确认认证方式&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysql;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user, host, plugin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 输出 plugin 为 auth_socket 时表示未设密码</span></span></code></pre></div><h3 id="_2-切换为密码认证" tabindex="-1">2. 切换为密码认证 <a class="header-anchor" href="#_2-切换为密码认证" aria-label="Permalink to &quot;2. 切换为密码认证&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> USER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WITH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysql_native_password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Lyedu@123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FLUSH PRIVILEGES;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EXIT;</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 验证密码登录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输入上述密码即可登录</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">密码策略</p><p>MySQL 8.0 要求密码至少 8 位，含大小写、数字和特殊字符。若需弱密码（仅测试环境）：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> GLOBAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> validate_password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">policy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LOW;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> GLOBAL</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> validate_password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></div><h2 id="四、安全加固-强烈建议" tabindex="-1">四、安全加固（强烈建议） <a class="header-anchor" href="#四、安全加固-强烈建议" aria-label="Permalink to &quot;四、安全加固（强烈建议）&quot;">​</a></h2><p><code>mysql_secure_installation</code> 是 MySQL 官方提供的交互式安全配置工具，能帮你快速修复默认安装的安全漏洞，降低被攻击的风险。<strong>安装完成后应尽快执行。</strong></p><h3 id="核心安全加固作用" tabindex="-1">核心安全加固作用 <a class="header-anchor" href="#核心安全加固作用" aria-label="Permalink to &quot;核心安全加固作用&quot;">​</a></h3><p>该命令会引导你完成 6 个关键操作，消除默认安装的安全隐患：</p><h4 id="_1-设置-修改-root-密码-针对密码认证模式" tabindex="-1">1. 设置/修改 root 密码（针对密码认证模式） <a class="header-anchor" href="#_1-设置-修改-root-密码-针对密码认证模式" aria-label="Permalink to &quot;1. 设置/修改 root 密码（针对密码认证模式）&quot;">​</a></h4><ul><li>若 MySQL 未设置 root 密码（或使用临时密码），会提示设置强密码；</li><li>若已设置密码，会询问是否修改；</li><li>强制遵循 MySQL 8.0+ 的密码复杂度规则（大小写+数字+特殊字符）。</li></ul><h4 id="_2-移除匿名用户-最重要的一步" tabindex="-1">2. 移除匿名用户（最重要的一步） <a class="header-anchor" href="#_2-移除匿名用户-最重要的一步" aria-label="Permalink to &quot;2. 移除匿名用户（最重要的一步）&quot;">​</a></h4><p>MySQL 默认会创建「匿名用户」（<code>&#39;&#39;@localhost</code>），任何人无需账号密码就能本地登录，仅能访问 <code>test</code> 库，这是极大的安全漏洞。该命令会删除所有匿名用户账户。</p><h4 id="_3-禁止-root-用户远程登录" tabindex="-1">3. 禁止 root 用户远程登录 <a class="header-anchor" href="#_3-禁止-root-用户远程登录" aria-label="Permalink to &quot;3. 禁止 root 用户远程登录&quot;">​</a></h4><p>root 是最高权限账户，一旦密码泄露，攻击者可远程控制整个数据库。该命令会将 root 的访问范围限制为 <code>localhost</code>（仅本地）。如需远程管理，建议创建低权限专用账户。</p><h4 id="_4-删除测试数据库-test-库" tabindex="-1">4. 删除测试数据库（test 库） <a class="header-anchor" href="#_4-删除测试数据库-test-库" aria-label="Permalink to &quot;4. 删除测试数据库（test 库）&quot;">​</a></h4><p>MySQL 默认会创建 <code>test</code> 库，所有用户均可访问，攻击者可能利用其做测试攻击或提权。该命令会删除 <code>test</code> 库及相关权限。</p><h4 id="_5-刷新权限表" tabindex="-1">5. 刷新权限表 <a class="header-anchor" href="#_5-刷新权限表" aria-label="Permalink to &quot;5. 刷新权限表&quot;">​</a></h4><p>执行 <code>FLUSH PRIVILEGES;</code>，让权限修改立即生效。</p><h4 id="_6-移除-root-的非本地主机访问权限" tabindex="-1">6. 移除 root 的非本地主机访问权限 <a class="header-anchor" href="#_6-移除-root-的非本地主机访问权限" aria-label="Permalink to &quot;6. 移除 root 的非本地主机访问权限&quot;">​</a></h4><p>清理 root 在 <code>%</code>、<code>127.0.0.1</code> 等非 <code>localhost</code> 地址的权限条目，进一步缩小 root 的访问范围。</p><h3 id="实操流程" tabindex="-1">实操流程 <a class="header-anchor" href="#实操流程" aria-label="Permalink to &quot;实操流程&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql_secure_installation</span></span></code></pre></div><p><strong>交互步骤（关键选项均选 <code>Y</code>/<code>Yes</code>）</strong>：</p><ol><li><strong>Enter password for user root:</strong><br> 若已设置 root 密码，输入密码；若为 <code>auth_socket</code> 模式，直接按回车。</li><li><strong>Would you like to setup VALIDATE PASSWORD component? [Y/n]</strong><br> 选 <code>Y</code>，启用密码强度验证组件。</li><li><strong>Please set the password for root here.</strong><br> 如需修改 root 密码，输入新密码；无需修改则按回车跳过。</li><li><strong>Remove anonymous users? [Y/n]</strong><br> 选 <code>Y</code>，删除匿名用户。</li><li><strong>Disallow root login remotely? [Y/n]</strong><br> 选 <code>Y</code>，禁止 root 远程登录。</li><li><strong>Remove test database and access to it? [Y/n]</strong><br> 选 <code>Y</code>，删除 test 库。</li><li><strong>Reload privilege tables now? [Y/n]</strong><br> 选 <code>Y</code>，刷新权限。</li></ol><h3 id="注意事项-ubuntu-24-04-auth-socket" tabindex="-1">注意事项（Ubuntu 24.04 + auth_socket） <a class="header-anchor" href="#注意事项-ubuntu-24-04-auth-socket" aria-label="Permalink to &quot;注意事项（Ubuntu 24.04 + auth_socket）&quot;">​</a></h3><ol><li><strong>auth_socket 模式</strong>：执行时「设置 root 密码」可能提示「密码已通过 socket 认证，无需设置」，属正常现象；</li><li><strong>仍建议执行</strong>：即使是 <code>auth_socket</code> 模式，该命令依然能完成「删匿名用户、禁 root 远程、删 test 库」等核心加固操作；</li><li><strong>切换密码认证后</strong>：若后续将 root 切换为密码认证，建议重新执行一次，确保密码强度和权限配置符合安全要求。</li></ol><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><ul><li>核心作用：<strong>一键消除默认安装的安全隐患</strong>；</li><li>主要加固点：删匿名用户、禁 root 远程登录、删 test 库、设置/强化 root 密码、刷新权限；</li><li>无论采用哪种认证模式，安装后都应立即执行该命令，这是数据库安全的基础操作。</li></ul><h2 id="五、常用配置" tabindex="-1">五、常用配置 <a class="header-anchor" href="#五、常用配置" aria-label="Permalink to &quot;五、常用配置&quot;">​</a></h2><h3 id="_1-配置文件位置" tabindex="-1">1. 配置文件位置 <a class="header-anchor" href="#_1-配置文件位置" aria-label="Permalink to &quot;1. 配置文件位置&quot;">​</a></h3><ul><li><strong>Ubuntu</strong>：<code>/etc/mysql/mysql.conf.d/mysqld.cnf</code></li></ul><h3 id="_2-允许远程连接" tabindex="-1">2. 允许远程连接 <a class="header-anchor" href="#_2-允许远程连接" aria-label="Permalink to &quot;2. 允许远程连接&quot;">​</a></h3><p>编辑配置文件，修改 <code>bind-address</code>：</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 更改默认端口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 9999</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 监听所有网卡（允许远程）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bind-address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 0.0.0.0</span></span></code></pre></div><p>授权远程用户（示例：root 从任意 IP 连接）：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&#39;@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Lyedu@123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GRANT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ALL PRIVILEGES </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;%&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WITH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> GRANT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> OPTION</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FLUSH PRIVILEGES;</span></span></code></pre></div><h3 id="_3-防火墙放行-3306" tabindex="-1">3. 防火墙放行 3306 <a class="header-anchor" href="#_3-防火墙放行-3306" aria-label="Permalink to &quot;3. 防火墙放行 3306&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 9999/tcp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看开放列表</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span></code></pre></div><h2 id="六、验证安装" tabindex="-1">六、验证安装 <a class="header-anchor" href="#六、验证安装" aria-label="Permalink to &quot;六、验证安装&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;SELECT VERSION();&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输出示例：8.0.45</span></span></code></pre></div><h2 id="七、常见问题" tabindex="-1">七、常见问题 <a class="header-anchor" href="#七、常见问题" aria-label="Permalink to &quot;七、常见问题&quot;">​</a></h2><h3 id="_1-忘记-root-密码" tabindex="-1">1. 忘记 root 密码 <a class="header-anchor" href="#_1-忘记-root-密码" aria-label="Permalink to &quot;1. 忘记 root 密码&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 停止 MySQL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 跳过权限验证启动</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysqld_safe</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --skip-grant-tables</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --skip-networking</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 无密码登录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. 重置密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">USE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ALTER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> USER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;root&#39;@&#39;localhost&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IDENTIFIED</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WITH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql_native_password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;NewPass@123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FLUSH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PRIVILEGES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EXIT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. 重启 MySQL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><h3 id="_2-无法远程连接" tabindex="-1">2. 无法远程连接 <a class="header-anchor" href="#_2-无法远程连接" aria-label="Permalink to &quot;2. 无法远程连接&quot;">​</a></h3><ul><li>检查 <code>bind-address</code> 是否为 <code>0.0.0.0</code></li><li>确认已执行 <code>GRANT</code> 授权</li><li>检查防火墙、云安全组是否放行 3306</li></ul><h3 id="_3-字符集" tabindex="-1">3. 字符集 <a class="header-anchor" href="#_3-字符集" aria-label="Permalink to &quot;3. 字符集&quot;">​</a></h3><p>MySQL 8.0 默认 utf8mb4。若需显式配置：</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">character-set-server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = utf8mb4</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">collation-server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = utf8mb4_unicode_ci</span></span></code></pre></div><h2 id="相关链接" tabindex="-1">相关链接 <a class="header-anchor" href="#相关链接" aria-label="Permalink to &quot;相关链接&quot;">​</a></h2><ul><li><a href="https://dev.mysql.com/doc/" target="_blank" rel="noreferrer">MySQL 官方文档</a></li><li><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noreferrer">MySQL 下载</a></li></ul>`,69)])])}const g=i(n,[["render",h]]);export{c as __pageData,g as default};
