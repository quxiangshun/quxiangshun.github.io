import{_ as a,o as i,c as t,ag as e}from"./chunks/framework.DEqXEGcv.js";const g=JSON.parse('{"title":"Upgrading 升级","description":"NetBox 升级指南","frontmatter":{"title":"Upgrading 升级","description":"NetBox 升级指南"},"headers":[],"relativePath":"tech-share/netbox/4.5.1/community/installation/upgrading.md","filePath":"tech-share/netbox/4.5.1/community/installation/upgrading.md"}'),n={name:"tech-share/netbox/4.5.1/community/installation/upgrading.md"};function h(l,s,p,r,k,o){return i(),t("div",null,[...s[0]||(s[0]=[e(`<h1 id="upgrading-to-a-new-netbox-release-升级-netbox" tabindex="-1">Upgrading to a New NetBox Release / 升级 NetBox <a class="header-anchor" href="#upgrading-to-a-new-netbox-release-升级-netbox" aria-label="Permalink to &quot;Upgrading to a New NetBox Release / 升级 NetBox&quot;">​</a></h1><p><em>内容来源 / Source: <a href="https://netboxlabs.com/docs/netbox/installation/upgrading/" target="_blank" rel="noreferrer">NetBox Labs Documentation</a> | 如有侵权请<a href="/contact.html">联系我们</a>删除</em></p><p><strong>Always backup your deployment before upgrading.</strong> 升级前务必备份。</p><h2 id="_1-review-release-notes-查看发布说明" tabindex="-1">1. Review Release Notes / 查看发布说明 <a class="header-anchor" href="#_1-review-release-notes-查看发布说明" aria-label="Permalink to &quot;1. Review Release Notes / 查看发布说明&quot;">​</a></h2><p>Review all <a href="https://netboxlabs.com/docs/netbox/release-notes/" target="_blank" rel="noreferrer">release notes</a> since your current version for breaking changes.</p><h2 id="_2-update-dependencies-更新依赖" tabindex="-1">2. Update Dependencies / 更新依赖 <a class="header-anchor" href="#_2-update-dependencies-更新依赖" aria-label="Permalink to &quot;2. Update Dependencies / 更新依赖&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Dependency</th><th>Supported Versions</th></tr></thead><tbody><tr><td>Python</td><td>3.12, 3.13, 3.14</td></tr><tr><td>PostgreSQL</td><td>14+</td></tr><tr><td>Redis</td><td>4.0+</td></tr></tbody></table><h2 id="_3-install-latest-release-安装最新版本" tabindex="-1">3. Install Latest Release / 安装最新版本 <a class="header-anchor" href="#_3-install-latest-release-安装最新版本" aria-label="Permalink to &quot;3. Install Latest Release / 安装最新版本&quot;">​</a></h2><p><strong>Use the same method as original installation.</strong> 使用与原始安装相同的方法。</p><h3 id="option-a-release-package-发行包" tabindex="-1">Option A: Release Package / 发行包 <a class="header-anchor" href="#option-a-release-package-发行包" aria-label="Permalink to &quot;Option A: Release Package / 发行包&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NEWVER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4.5.0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OLDVER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4.4.10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/netbox-community/netbox/archive/v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$NEWVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xzf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$NEWVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.tar.gz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sfn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$NEWVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$OLDVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/local_requirements.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$OLDVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/netbox/netbox/configuration.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox/netbox/netbox/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$OLDVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/netbox/media/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox/netbox/</span></span></code></pre></div><h3 id="option-b-git-git" tabindex="-1">Option B: Git / Git <a class="header-anchor" href="#option-b-git-git" aria-label="Permalink to &quot;Option B: Git / Git&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fetch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tags</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.5.0</span></span></code></pre></div><h2 id="_4-run-upgrade-script-运行升级脚本" tabindex="-1">4. Run Upgrade Script / 运行升级脚本 <a class="header-anchor" href="#_4-run-upgrade-script-运行升级脚本" aria-label="Permalink to &quot;4. Run Upgrade Script / 运行升级脚本&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./upgrade.sh</span></span></code></pre></div><p>If Python &lt; 3.12: <code>sudo PYTHON=/usr/bin/python3.12 ./upgrade.sh</code></p><h2 id="_5-restart-services-重启服务" tabindex="-1">5. Restart Services / 重启服务 <a class="header-anchor" href="#_5-restart-services-重启服务" aria-label="Permalink to &quot;5. Restart Services / 重启服务&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox-rq</span></span></code></pre></div>`,18)])])}const F=a(n,[["render",h]]);export{g as __pageData,F as default};
