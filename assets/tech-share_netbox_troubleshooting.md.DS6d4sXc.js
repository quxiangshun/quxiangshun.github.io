import{_ as i,o as a,c as l,ag as t}from"./chunks/framework.BT_aBzO2.js";const g=JSON.parse('{"title":"NetBox 故障排查","description":"","frontmatter":{},"headers":[],"relativePath":"tech-share/netbox/troubleshooting.md","filePath":"tech-share/netbox/troubleshooting.md"}'),e={name:"tech-share/netbox/troubleshooting.md"};function n(h,s,p,o,r,k){return a(),l("div",null,[...s[0]||(s[0]=[t(`<h1 id="netbox-故障排查" tabindex="-1">NetBox 故障排查 <a class="header-anchor" href="#netbox-故障排查" aria-label="Permalink to &quot;NetBox 故障排查&quot;">​</a></h1><p>本文档提供了NetBox常见问题的故障排查步骤和解决方案。</p><h2 id="一、安装与部署问题" tabindex="-1">一、安装与部署问题 <a class="header-anchor" href="#一、安装与部署问题" aria-label="Permalink to &quot;一、安装与部署问题&quot;">​</a></h2><h3 id="_1-数据库连接失败" tabindex="-1">1. 数据库连接失败 <a class="header-anchor" href="#_1-数据库连接失败" aria-label="Permalink to &quot;1. 数据库连接失败&quot;">​</a></h3><h4 id="症状" tabindex="-1">症状 <a class="header-anchor" href="#症状" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>NetBox 启动时显示数据库连接错误</li><li>日志中出现 <code>OperationalError: could not connect to server</code> 错误</li></ul><h4 id="可能原因" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>PostgreSQL 服务未运行</li><li>数据库配置错误</li><li>防火墙阻止连接</li><li>数据库用户权限不足</li></ul><h4 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查 PostgreSQL 服务状态</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql</span></span></code></pre></div></li><li><p><strong>验证数据库连接</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost</span></span></code></pre></div></li><li><p><strong>检查数据库配置</strong>： 确保 <code>configuration.py</code> 文件中的数据库参数正确：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DATABASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;NAME&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;netbox&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;USER&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;netbox&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;PASSWORD&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;your_secure_password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;HOST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;PORT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;CONN_MAX_AGE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>检查防火墙规则</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> iptables</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span></span></code></pre></div></li></ol><h3 id="_2-redis-连接失败" tabindex="-1">2. Redis 连接失败 <a class="header-anchor" href="#_2-redis-连接失败" aria-label="Permalink to &quot;2. Redis 连接失败&quot;">​</a></h3><h4 id="症状-1" tabindex="-1">症状 <a class="header-anchor" href="#症状-1" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>NetBox 启动时显示 Redis 连接错误</li><li>日志中出现 <code>ConnectionError: Error 111 connecting to localhost:6379</code> 错误</li></ul><h4 id="可能原因-1" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-1" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>Redis 服务未运行</li><li>Redis 配置错误</li><li>防火墙阻止连接</li></ul><h4 id="解决方案-1" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-1" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查 Redis 服务状态</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span></span></code></pre></div></li><li><p><strong>验证 Redis 连接</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ping</span></span></code></pre></div></li><li><p><strong>检查 Redis 配置</strong>： 确保 <code>configuration.py</code> 文件中的 Redis 参数正确：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">REDIS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;default&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;HOST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;PORT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;PASSWORD&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;DATABASE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;SSL&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><h3 id="_3-权限错误" tabindex="-1">3. 权限错误 <a class="header-anchor" href="#_3-权限错误" aria-label="Permalink to &quot;3. 权限错误&quot;">​</a></h3><h4 id="症状-2" tabindex="-1">症状 <a class="header-anchor" href="#症状-2" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>NetBox 启动时显示权限错误</li><li>日志中出现 <code>PermissionError: [Errno 13] Permission denied</code> 错误</li></ul><h4 id="可能原因-2" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-2" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>文件或目录权限不正确</li><li>Web 服务器用户权限不足</li></ul><h4 id="解决方案-2" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-2" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查文件权限</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox:netbox</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 755</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox</span></span></code></pre></div></li><li><p><strong>检查 Web 服务器用户</strong>： 确保 Nginx 或 Apache 以正确的用户运行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aux</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aux</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache</span></span></code></pre></div></li></ol><h2 id="二、运行时问题" tabindex="-1">二、运行时问题 <a class="header-anchor" href="#二、运行时问题" aria-label="Permalink to &quot;二、运行时问题&quot;">​</a></h2><h3 id="_1-页面加载缓慢" tabindex="-1">1. 页面加载缓慢 <a class="header-anchor" href="#_1-页面加载缓慢" aria-label="Permalink to &quot;1. 页面加载缓慢&quot;">​</a></h3><h4 id="症状-3" tabindex="-1">症状 <a class="header-anchor" href="#症状-3" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>NetBox 页面加载时间过长</li><li>API 响应缓慢</li></ul><h4 id="可能原因-3" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-3" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>服务器资源不足</li><li>数据库查询效率低</li><li>Redis 缓存配置不当</li><li>网络连接问题</li></ul><h4 id="解决方案-3" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-3" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查服务器资源</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">top</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span></code></pre></div></li><li><p><strong>优化数据库</strong>：</p><ul><li>确保数据库索引正确创建</li><li>考虑增加 PostgreSQL 内存配置</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑 postgresql.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/postgresql/14/main/postgresql.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 增加 shared_buffers 和 effective_cache_size</span></span></code></pre></div></li><li><p><strong>优化 Redis 缓存</strong>： 确保 Redis 配置适合您的环境：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/redis/redis.conf</span></span></code></pre></div></li></ol><h3 id="_2-后台任务失败" tabindex="-1">2. 后台任务失败 <a class="header-anchor" href="#_2-后台任务失败" aria-label="Permalink to &quot;2. 后台任务失败&quot;">​</a></h3><h4 id="症状-4" tabindex="-1">症状 <a class="header-anchor" href="#症状-4" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>导入/导出操作失败</li><li>批量操作未完成</li><li>日志中出现 <code>RQWorkerDeathError</code> 错误</li></ul><h4 id="可能原因-4" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-4" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>RQ 工作器未运行</li><li>任务队列阻塞</li><li>内存不足</li></ul><h4 id="解决方案-4" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-4" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查 RQ 工作器状态</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox-rq</span></span></code></pre></div></li><li><p><strong>重启 RQ 工作器</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox-rq</span></span></code></pre></div></li><li><p><strong>检查任务队列</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接到 Redis 并检查队列</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">KEYS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rq:queue:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span></code></pre></div></li></ol><h3 id="_3-api-访问失败" tabindex="-1">3. API 访问失败 <a class="header-anchor" href="#_3-api-访问失败" aria-label="Permalink to &quot;3. API 访问失败&quot;">​</a></h3><h4 id="症状-5" tabindex="-1">症状 <a class="header-anchor" href="#症状-5" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>API 请求返回 401 或 403 错误</li><li>令牌认证失败</li></ul><h4 id="可能原因-5" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-5" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>API 令牌无效或过期</li><li>用户权限不足</li><li>API URL 错误</li></ul><h4 id="解决方案-5" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-5" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查 API 令牌</strong>：</p><ul><li>确保令牌存在且未过期</li><li>验证令牌权限</li></ul></li><li><p><strong>检查请求格式</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Token YOUR_TOKEN&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://netbox/api/dcim/devices/</span></span></code></pre></div></li><li><p><strong>检查用户权限</strong>： 确保用户有适当的 API 访问权限</p></li></ol><h2 id="三、数据问题" tabindex="-1">三、数据问题 <a class="header-anchor" href="#三、数据问题" aria-label="Permalink to &quot;三、数据问题&quot;">​</a></h2><h3 id="_1-数据导入失败" tabindex="-1">1. 数据导入失败 <a class="header-anchor" href="#_1-数据导入失败" aria-label="Permalink to &quot;1. 数据导入失败&quot;">​</a></h3><h4 id="症状-6" tabindex="-1">症状 <a class="header-anchor" href="#症状-6" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>CSV/JSON 导入操作失败</li><li>导入过程中出现验证错误</li></ul><h4 id="可能原因-6" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-6" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>数据格式错误</li><li>必填字段缺失</li><li>引用的资源不存在</li></ul><h4 id="解决方案-6" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-6" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>验证数据格式</strong>：</p><ul><li>确保 CSV/JSON 格式正确</li><li>检查字段名称和数据类型</li></ul></li><li><p><strong>检查必填字段</strong>： 确保所有必填字段都已填写</p></li><li><p><strong>验证引用资源</strong>： 确保导入数据中引用的资源（如制造商、设备类型等）已存在</p></li></ol><h3 id="_2-数据丢失" tabindex="-1">2. 数据丢失 <a class="header-anchor" href="#_2-数据丢失" aria-label="Permalink to &quot;2. 数据丢失&quot;">​</a></h3><h4 id="症状-7" tabindex="-1">症状 <a class="header-anchor" href="#症状-7" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>某些资源在 NetBox 中消失</li><li>数据不完整</li></ul><h4 id="可能原因-7" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-7" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>意外删除操作</li><li>数据库迁移错误</li><li>备份恢复失败</li></ul><h4 id="解决方案-7" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-7" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查变更日志</strong>： NetBox 会记录所有变更，可在管理界面查看</p></li><li><p><strong>从备份恢复</strong>： 如果有备份，可从备份恢复数据</p></li><li><p><strong>检查数据库迁移</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox/manage.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span></span></code></pre></div></li></ol><h2 id="四、配置问题" tabindex="-1">四、配置问题 <a class="header-anchor" href="#四、配置问题" aria-label="Permalink to &quot;四、配置问题&quot;">​</a></h2><h3 id="_1-邮件配置错误" tabindex="-1">1. 邮件配置错误 <a class="header-anchor" href="#_1-邮件配置错误" aria-label="Permalink to &quot;1. 邮件配置错误&quot;">​</a></h3><h4 id="症状-8" tabindex="-1">症状 <a class="header-anchor" href="#症状-8" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>密码重置邮件未发送</li><li>通知邮件未送达</li></ul><h4 id="可能原因-8" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-8" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>SMTP 服务器配置错误</li><li>网络连接问题</li><li>认证失败</li></ul><h4 id="解决方案-8" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-8" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查邮件配置</strong>：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EMAIL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;SERVER&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;smtp.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;PORT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">587</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;USERNAME&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user@example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;PASSWORD&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;your_password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;USE_SSL&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;USE_TLS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;FROM_EMAIL&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;netbox@example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>测试邮件发送</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox/manage.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sendtestemail</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span></span></code></pre></div></li></ol><h3 id="_2-认证配置错误" tabindex="-1">2. 认证配置错误 <a class="header-anchor" href="#_2-认证配置错误" aria-label="Permalink to &quot;2. 认证配置错误&quot;">​</a></h3><h4 id="症状-9" tabindex="-1">症状 <a class="header-anchor" href="#症状-9" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>用户无法登录</li><li>LDAP/SSO 集成失败</li></ul><h4 id="可能原因-9" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-9" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>认证后端配置错误</li><li>外部认证服务不可用</li><li>证书验证失败</li></ul><h4 id="解决方案-9" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-9" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查认证配置</strong>：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AUTHENTICATION_BACKENDS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;django.contrib.auth.backends.ModelBackend&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;netbox.authentication.LDAPBackend&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LDAP 配置</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LDAP_AUTH_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ldap://ldap.example.com:389&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LDAP_AUTH_SEARCH_BASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;dc=example,dc=com&quot;</span></span></code></pre></div></li><li><p><strong>测试认证服务</strong>：</p><ul><li>验证 LDAP 服务器可访问</li><li>检查 SSO 配置</li></ul></li></ol><h2 id="五、系统集成问题" tabindex="-1">五、系统集成问题 <a class="header-anchor" href="#五、系统集成问题" aria-label="Permalink to &quot;五、系统集成问题&quot;">​</a></h2><h3 id="_1-webhook-失败" tabindex="-1">1. Webhook 失败 <a class="header-anchor" href="#_1-webhook-失败" aria-label="Permalink to &quot;1. Webhook 失败&quot;">​</a></h3><h4 id="症状-10" tabindex="-1">症状 <a class="header-anchor" href="#症状-10" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>Webhook 未触发</li><li>Webhook 目标服务器未收到请求</li></ul><h4 id="可能原因-10" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-10" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>Webhook 配置错误</li><li>目标服务器不可达</li><li>认证失败</li></ul><h4 id="解决方案-10" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-10" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查 Webhook 配置</strong>： 确保目标 URL、触发事件和认证信息正确</p></li><li><p><strong>测试 Webhook</strong>： 使用 curl 测试目标 URL：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://target-server/webhook</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;test&quot;: &quot;data&quot;}&#39;</span></span></code></pre></div></li><li><p><strong>检查 Webhook 日志</strong>： NetBox 会记录 Webhook 执行情况</p></li></ol><h3 id="_2-插件错误" tabindex="-1">2. 插件错误 <a class="header-anchor" href="#_2-插件错误" aria-label="Permalink to &quot;2. 插件错误&quot;">​</a></h3><h4 id="症状-11" tabindex="-1">症状 <a class="header-anchor" href="#症状-11" aria-label="Permalink to &quot;症状&quot;">​</a></h4><ul><li>插件未加载</li><li>插件功能不可用</li><li>启动时出现插件错误</li></ul><h4 id="可能原因-11" tabindex="-1">可能原因 <a class="header-anchor" href="#可能原因-11" aria-label="Permalink to &quot;可能原因&quot;">​</a></h4><ul><li>插件版本不兼容</li><li>插件依赖缺失</li><li>插件配置错误</li></ul><h4 id="解决方案-11" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-11" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><ol><li><p><strong>检查插件版本</strong>： 确保插件版本与 NetBox 版本兼容</p></li><li><p><strong>安装插件依赖</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requirements.txt</span></span></code></pre></div></li><li><p><strong>检查插件配置</strong>： 确保插件配置正确</p></li></ol><h2 id="六、日志分析" tabindex="-1">六、日志分析 <a class="header-anchor" href="#六、日志分析" aria-label="Permalink to &quot;六、日志分析&quot;">​</a></h2><h3 id="_1-系统日志" tabindex="-1">1. 系统日志 <a class="header-anchor" href="#_1-系统日志" aria-label="Permalink to &quot;1. 系统日志&quot;">​</a></h3><p>NetBox 的日志文件通常位于：</p><ul><li><code>/opt/netbox/netbox.log</code>（应用日志）</li><li><code>/var/log/nginx/</code>（Web 服务器日志）</li><li><code>/var/log/postgresql/</code>（数据库日志）</li></ul><h3 id="_2-日志级别" tabindex="-1">2. 日志级别 <a class="header-anchor" href="#_2-日志级别" aria-label="Permalink to &quot;2. 日志级别&quot;">​</a></h3><p>可以在 <code>configuration.py</code> 文件中调整日志级别：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LOG_LEVEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;DEBUG&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 或 &quot;INFO&quot;, &quot;WARNING&quot;, &quot;ERROR&quot;</span></span></code></pre></div><h3 id="_3-常见日志错误" tabindex="-1">3. 常见日志错误 <a class="header-anchor" href="#_3-常见日志错误" aria-label="Permalink to &quot;3. 常见日志错误&quot;">​</a></h3><ul><li><strong>DatabaseError</strong>：数据库相关错误</li><li><strong>ImportError</strong>：模块导入错误</li><li><strong>PermissionError</strong>：权限错误</li><li><strong>ConnectionError</strong>：网络连接错误</li><li><strong>ValueError</strong>：值错误</li></ul><h2 id="七、性能优化" tabindex="-1">七、性能优化 <a class="header-anchor" href="#七、性能优化" aria-label="Permalink to &quot;七、性能优化&quot;">​</a></h2><h3 id="_1-数据库优化" tabindex="-1">1. 数据库优化 <a class="header-anchor" href="#_1-数据库优化" aria-label="Permalink to &quot;1. 数据库优化&quot;">​</a></h3><ul><li><p><strong>增加 shared_buffers</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 postgresql.conf 中</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shared_buffers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1GB</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 推荐为总内存的 25%</span></span></code></pre></div></li><li><p><strong>增加 effective_cache_size</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">effective_cache_size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4GB</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 推荐为总内存的 50-75%</span></span></code></pre></div></li><li><p><strong>启用查询日志</strong>（仅用于调试）：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log_min_duration_statement</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 记录执行时间超过 1 秒的语句</span></span></code></pre></div></li></ul><h3 id="_2-应用优化" tabindex="-1">2. 应用优化 <a class="header-anchor" href="#_2-应用优化" aria-label="Permalink to &quot;2. 应用优化&quot;">​</a></h3><ul><li><p><strong>增加 Gunicorn 工作进程</strong>：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 gunicorn.py 中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">workers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 推荐为 CPU 核心数</span></span></code></pre></div></li><li><p><strong>启用缓存</strong>： 确保 Redis 缓存已正确配置</p></li><li><p><strong>优化静态文件</strong>： 确保静态文件已正确收集：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox/manage.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> collectstatic</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-input</span></span></code></pre></div></li></ul><h2 id="八、备份与恢复" tabindex="-1">八、备份与恢复 <a class="header-anchor" href="#八、备份与恢复" aria-label="Permalink to &quot;八、备份与恢复&quot;">​</a></h2><h3 id="_1-数据库备份" tabindex="-1">1. 数据库备份 <a class="header-anchor" href="#_1-数据库备份" aria-label="Permalink to &quot;1. 数据库备份&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 备份数据库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pg_dump</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox_backup.sql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 恢复数据库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox_backup.sql</span></span></code></pre></div><h3 id="_2-配置备份" tabindex="-1">2. 配置备份 <a class="header-anchor" href="#_2-配置备份" aria-label="Permalink to &quot;2. 配置备份&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 备份配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -czf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox_config_backup.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox/netbox/netbox/configuration.py</span></span></code></pre></div><h3 id="_3-完整备份" tabindex="-1">3. 完整备份 <a class="header-anchor" href="#_3-完整备份" aria-label="Permalink to &quot;3. 完整备份&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 备份整个 NetBox 目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -czf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox_full_backup.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox</span></span></code></pre></div><h2 id="九、联系支持" tabindex="-1">九、联系支持 <a class="header-anchor" href="#九、联系支持" aria-label="Permalink to &quot;九、联系支持&quot;">​</a></h2><p>如果以上解决方案都无法解决您的问题，可以通过以下方式获取支持：</p><ol><li><p><strong>NetBox 社区</strong>：</p><ul><li><a href="https://github.com/netbox-community/netbox/issues" target="_blank" rel="noreferrer">NetBox GitHub Issues</a></li><li><a href="https://github.com/netbox-community/netbox/discussions" target="_blank" rel="noreferrer">NetBox 讨论组</a></li></ul></li><li><p><strong>NetBox 文档</strong>：</p><ul><li><a href="https://docs.netbox.dev/en/stable/" target="_blank" rel="noreferrer">官方文档</a></li><li><a href="https://docs.netbox.dev/en/stable/installation/troubleshooting/" target="_blank" rel="noreferrer">故障排查指南</a></li></ul></li><li><p><strong>专业支持</strong>：</p><ul><li>联系您的 NetBox 服务提供商</li><li>寻求专业的网络管理咨询服务</li></ul></li></ol><h2 id="十、最佳实践" tabindex="-1">十、最佳实践 <a class="header-anchor" href="#十、最佳实践" aria-label="Permalink to &quot;十、最佳实践&quot;">​</a></h2><ol><li><p><strong>定期备份</strong>： 建立定期备份策略，确保数据安全</p></li><li><p><strong>监控系统</strong>： 监控 NetBox 实例的健康状态</p></li><li><p><strong>版本管理</strong>： 定期更新 NetBox 到最新版本</p></li><li><p><strong>文档化</strong>： 记录您的 NetBox 配置和自定义设置</p></li><li><p><strong>测试环境</strong>： 在测试环境中验证更改后再应用到生产环境</p></li></ol><p>通过遵循本文档的故障排查步骤，您应该能够解决大多数 NetBox 相关的问题。如果问题仍然存在，请不要 hesitate to seek help from the NetBox community or professional support services.</p>`,118)])])}const c=i(e,[["render",n]]);export{g as __pageData,c as default};
