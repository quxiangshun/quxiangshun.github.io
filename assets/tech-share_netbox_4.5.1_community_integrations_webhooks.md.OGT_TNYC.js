import{_ as o,o as a,c as t,ag as s}from"./chunks/framework.BT_aBzO2.js";const b=JSON.parse('{"title":"Webhooks","description":"NetBox Webhooks 配置","frontmatter":{"title":"Webhooks","description":"NetBox Webhooks 配置"},"headers":[],"relativePath":"tech-share/netbox/4.5.1/community/integrations/webhooks.md","filePath":"tech-share/netbox/4.5.1/community/integrations/webhooks.md"}'),i={name:"tech-share/netbox/4.5.1/community/integrations/webhooks.md"};function n(h,e,r,l,c,d){return a(),t("div",null,[...e[0]||(e[0]=[s('<h1 id="webhooks-webhooks" tabindex="-1">Webhooks / Webhooks <a class="header-anchor" href="#webhooks-webhooks" aria-label="Permalink to &quot;Webhooks / Webhooks&quot;">​</a></h1><p><em>内容来源 / Source: <a href="https://netboxlabs.com/docs/netbox/integrations/webhooks/" target="_blank" rel="noreferrer">NetBox Labs Documentation</a> | 如有侵权请<a href="/contact.html">联系我们</a>删除</em></p><p>NetBox 可通过 <a href="./../features/event-rules.html">Event Rules</a> 在对象变更时向远程系统发送 webhook。</p><h2 id="jinja2-template-support-jinja2-模板" tabindex="-1">Jinja2 Template Support / Jinja2 模板 <a class="header-anchor" href="#jinja2-template-support-jinja2-模板" aria-label="Permalink to &quot;Jinja2 Template Support / Jinja2 模板&quot;">​</a></h2><p><code>URL</code>、<code>additional_headers</code>、<code>body_template</code> 字段支持 Jinja2 模板，可动态生成请求内容。</p><h3 id="available-context-可用上下文" tabindex="-1">Available Context / 可用上下文 <a class="header-anchor" href="#available-context-可用上下文" aria-label="Permalink to &quot;Available Context / 可用上下文&quot;">​</a></h3><ul><li><code>snapshots</code> - 变更前后对象快照 (prechange, postchange)</li><li><code>data</code> - 当前对象完整表示</li><li><code>request_id</code> - 请求 ID</li><li><code>username</code> - 操作用户</li><li><code>timestamp</code> - 事件时间 (ISO 8601)</li><li><code>model</code> - 触发变更的模型</li><li><code>event</code> - 事件类型: created, updated, deleted</li></ul><h2 id="webhook-processing-处理流程" tabindex="-1">Webhook Processing / 处理流程 <a class="header-anchor" href="#webhook-processing-处理流程" aria-label="Permalink to &quot;Webhook Processing / 处理流程&quot;">​</a></h2><p>变更检测后，webhook 放入 Redis 队列，由 <code>rqworker</code> 异步发送 HTTP 请求。2XX 响应视为成功。失败请求可在 System &gt; Background Tasks 中查看或重新排队。</p><h2 id="troubleshooting-故障排查" tabindex="-1">Troubleshooting / 故障排查 <a class="header-anchor" href="#troubleshooting-故障排查" aria-label="Permalink to &quot;Troubleshooting / 故障排查&quot;">​</a></h2><p>使用内置 webhook 接收器测试：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox/manage.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webhook_receiver</span></span></code></pre></div><p>将 webhook URL 临时改为 <code>http://localhost:9000/</code> 可查看发送内容。</p>',13)])])}const k=o(i,[["render",n]]);export{b as __pageData,k as default};
