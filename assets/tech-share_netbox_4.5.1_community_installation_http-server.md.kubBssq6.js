import{_ as i,o as a,c as t,a2 as n}from"./chunks/framework.C766EroN.js";const d=JSON.parse('{"title":"HTTP Server 配置","description":"NetBox nginx/Apache 配置","frontmatter":{"title":"HTTP Server 配置","description":"NetBox nginx/Apache 配置"},"headers":[],"relativePath":"tech-share/netbox/4.5.1/community/installation/http-server.md","filePath":"tech-share/netbox/4.5.1/community/installation/http-server.md"}'),e={name:"tech-share/netbox/4.5.1/community/installation/http-server.md"};function h(l,s,p,r,k,o){return a(),t("div",null,[...s[0]||(s[0]=[n(`<h1 id="http-server-setup-http-服务器配置" tabindex="-1">HTTP Server Setup / HTTP 服务器配置 <a class="header-anchor" href="#http-server-setup-http-服务器配置" aria-label="Permalink to &quot;HTTP Server Setup / HTTP 服务器配置&quot;">​</a></h1><p><em>内容来源 / Source: <a href="https://netboxlabs.com/docs/netbox/installation/http-server/" target="_blank" rel="noreferrer">NetBox Labs Documentation</a> | 如有侵权请<a href="/contact.html">联系我们</a>删除</em></p><p>Example configurations for <a href="https://www.nginx.com/" target="_blank" rel="noreferrer">nginx</a> and <a href="https://httpd.apache.org/" target="_blank" rel="noreferrer">Apache</a>.</p><h2 id="obtain-ssl-certificate-获取-ssl-证书" tabindex="-1">Obtain SSL Certificate / 获取 SSL 证书 <a class="header-anchor" href="#obtain-ssl-certificate-获取-ssl-证书" aria-label="Permalink to &quot;Obtain SSL Certificate / 获取 SSL 证书&quot;">​</a></h2><p>For testing (self-signed):</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> req</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -nodes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 365</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -newkey</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa:2048</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -keyout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ssl/private/netbox.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ssl/certs/netbox.crt</span></span></code></pre></div><p>For production, use <a href="https://letsencrypt.org/" target="_blank" rel="noreferrer">Let&#39;s Encrypt</a> or a commercial certificate.</p><h2 id="option-a-nginx-nginx" tabindex="-1">Option A: nginx / nginx <a class="header-anchor" href="#option-a-nginx-nginx" aria-label="Permalink to &quot;Option A: nginx / nginx&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox/contrib/nginx.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/nginx/sites-available/netbox</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Replace netbox.example.com with your domain</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/nginx/sites-enabled/default</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/nginx/sites-available/netbox</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/nginx/sites-enabled/netbox</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><p><strong>gunicorn vs. uWSGI:</strong> The nginx config assumes gunicorn. If using uWSGI, uncomment the uWSGI section.</p><h2 id="option-b-apache-apache" tabindex="-1">Option B: Apache / Apache <a class="header-anchor" href="#option-b-apache-apache" aria-label="Permalink to &quot;Option B: Apache / Apache&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/netbox/contrib/apache.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apache2/sites-available/netbox.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a2enmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> proxy_http</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> headers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rewrite</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a2ensite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netbox</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span></span></code></pre></div><h2 id="troubleshooting-故障排查" tabindex="-1">Troubleshooting / 故障排查 <a class="header-anchor" href="#troubleshooting-故障排查" aria-label="Permalink to &quot;Troubleshooting / 故障排查&quot;">​</a></h2><ul><li><strong>502 Bad Gateway:</strong> Check WSGI is running (<code>systemctl status netbox</code>), nginx connects to port 8001</li><li><strong>SELinux:</strong> May need <code>setsebool -P httpd_can_network_connect 1</code></li></ul>`,14)])])}const c=i(e,[["render",h]]);export{d as __pageData,c as default};
